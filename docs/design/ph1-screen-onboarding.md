# 画面仕様: オンボーディング（PH1）

## メタ情報
- 画面名: オンボーディング
- バージョン/更新日: 1.0 / 2024-XX-XX
- 作成者/レビュー担当:
- 対応フェーズ: PH1

## 目的と役割
- アプリの価値（場所連動サウンドスケープ）と必要権限を短く伝え、初回体験の期待値を合わせる。
- オンボーディング完了フラグを設定し、次回以降はスキップ。

## ユーザーフロー
- シナリオ: 初回起動 → オンボーディング 2〜3 枚 → 「はじめる」 → 権限ガイドへ遷移。
- 前提状態: オンボーディング未完了、権限未取得。
- 終了条件/戻り動線: スキップで即権限ガイドへ、完了で権限ガイドへ。

## レイアウト概要
- ビューポート: iPhone 15 Pro 390x844pt。
- セクション/コンポーネント:
  - ヒーロービジュアル（抽象的な波形/地点アイコン）。
  - タイトル + リード文（各スライド）。
  - ページインジケータ（ドット）。
  - CTA: 「はじめる」（最終スライド）、スキップ（常時）。
- 寸法表（目安）:

| 要素 | サイズ(pt) | 余白(pt) | 備考 |
| ---- | ----------- | -------- | ---- |
| タイトル | 24 / Semibold | 上 48 | 中央揃え |
| リード文 | 16 / Regular | 上 12 | 2–3 行 |
| ヒーロー | 220〜260 四方 | 上 32 | 抽象イラスト |
| CTA | 高さ 52 | 下 32 | フル幅、角丸 12 |
| スキップ | 16 | 上 16 | 右上配置 |

## コンポーネント詳細
- ヒーロービジュアル
  - 役割: 抽象的にサウンドと場所を示す。
  - ステート: スライドごとに切替。
  - AX: 補足ラベル（例: 「サウンドスケープのイメージ」）。
- タイトル/リード
  - 役割: 一言で価値を伝える。
  - ステート: スライドごとに文言変化。
  - AX: テキスト読み上げ。
- ページインジケータ
  - 役割: 現在スライド位置を示す。
  - ステート: active/inactive。
- CTA 「はじめる」
  - 役割: オンボーディング完了 → 権限ガイドへ。
  - ステート: 最終スライドで enabled。
  - AX: 「はじめる」ボタン。
- スキップ
  - 役割: 即権限ガイドへ。
  - ステート: 常時。
  - AX: 「スキップ」ボタン。

## データ・状態（StateObservationKit / ステートマシン）
- ステートマシン: `OnboardingStore.state`
  - 状態: idle → showing(slideIndex: Int) → completed
  - 遷移トリガー: スワイプ/タップでスライド前後移動、CTA タップで完了、スキップで即完了。
  - 副作用: 完了フラグ永続化、権限ガイドへのナビゲーション。
- 購読ストア: `OnboardingStore.state`。
- ローカル状態: スクロール位置、アニメーション再生フラグ。
- エラー/ローディング表示: なし（静的コンテンツ）。
- 状態遷移表（例）:

| 現在 | イベント/条件 | 遷移先 | 副作用 |
| ---- | ------------- | ------ | ------ |
| idle | 初回表示 | showing(index: 0) | 最初のスライドを表示 |
| showing(i) | 次へタップ/スワイプ | showing(i+1) | ページインジケータ更新 |
| showing(last) | 「はじめる」タップ | completed | 完了フラグ保存、権限ガイドへ |
| showing(*) | 「スキップ」タップ | completed | 完了フラグ保存、権限ガイドへ |

## アニメーション・モーション
- スライド切替: 水平スワイプ/フェード（300ms, ease in-out）。
- ヒーロー: 軽いパララックスまたはループする波形モーション（60–90s ループ）。
- CTA: タップ時に 0.95 スケール。

## サウンド挙動
- なし（サイレント）。サウンド開始はメイン画面以降。

## 空状態・エラー状態
- ローカルコンテンツのみのため特になし。

## 権限・デバイス前提
- 権限取得は含まず、完了後に権限ガイドへ遷移。

## 計測・ログ（任意）
- イベント: スキップ率、完了率、スライド滞在時間（簡易）。
- メトリクス: オンボーディング離脱ポイント。

## 未決事項・メモ
- スライド文言（例）
  - 1: 「あなたの場所に寄り添う音を届けます」
  - 2: 「移動に合わせて音がなめらかに変化します」
  - 3: 「はじめる前に位置情報の許可が必要です」
- ビジュアルスタイル（抽象イラスト/グラデーション）を決定する。
